import waiting from "../../assets/waiting.svg";
import { Container, Typography, Box } from "@mui/material";
import "./generateReport.css";
import { useEffect, useState } from "react";
import LinearWithValueLabel from "../circularProgress/LinearProgress";

const ReportWaitingModal = () => {
  const [count, setCount] = useState(0);
  useEffect(() => {
    const interVal = setInterval(() => {
      setCount((prevCount) => {
        if (prevCount === 60) {
          clearInterval(interVal);
          return 1;
        }
        return prevCount + 1;
      });
    }, 900);
    return () => clearInterval(interVal);
  });

  return (
    <Container
      sx={{
        width: "100%",
        height: "100vh",
        display: "block",
        transition: "all 0.3s ease",
        position: "absolute",
        padding: "0 32px",
        bottom: 0,
        left: 0,
        right: 0,
        background: "white",
        zIndex: 1,
      }}>
      <img
        src={waiting}
        alt="not found"
        width="128px"
        style={{
          display: "flex",
          justifyContent: "center",
          margin: "80px auto  36px auto",
        }}
      />
      <Typography
        variant="h4"
        component="h4"
        className="fontPrompt font_weight_400 font_size_16 "
        sx={{
          lineHeight: "24px",
          color: "black",
          marginBottom: "5.9rem",
          textAlign: "center",
        }}>
        Your personality report is being compiled. It will take us about 30 secs
        to 1 min to collect the necessary information.
      </Typography>
      <Box
        sx={{ display: { xs: "flex", md: "none" }, position: "relative" }}
        className="animation-container">
        <div
          style={{
            display: "flex",
            flexDirection: "column",
            alignItems: "flex-start",
            gap: "1.5rem",
            marginTop: "11rem",
          }}>
          <Typography
            component="h1"
            variant="h1"
            className="fontPrompt font_weight_400 font_size_64"
            sx={{
              position: "relative",
              marginBottom: "2rem",
              overflow: "hidden",
              height: "6rem",
              width: "16rem",
            }}>
            <span className="counter">{count}</span>
            <span
              style={{
                paddingLeft: "8rem",
                width: "100%",
                justifyContent: "flex-end",
              }}>
              %
            </span>
          </Typography>

          {/* report file svg */}
          <Typography className="report_file" variant="h1">
            <svg
              width="62"
              height="74"
              viewBox="0 0 62 74"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <g clipPath="url(#clip0_607_3925)">
                <path
                  opacity="0.2"
                  d="M59.125 22.9375H39.4375V3.25L59.125 22.9375Z"
                  fill="black"
                />
                <path
                  d="M61.1148 20.9477L41.4273 1.26016C41.166 0.99906 40.8557 0.792021 40.5143 0.650867C40.1728 0.509713 39.807 0.43721 39.4375 0.437501H5.6875C4.19566 0.437501 2.76492 1.03013 1.71002 2.08502C0.655132 3.13992 0.0625 4.57066 0.0625 6.0625V67.9375C0.0625 69.4293 0.655132 70.8601 1.71002 71.915C2.76492 72.9699 4.19566 73.5625 5.6875 73.5625H56.3125C57.8043 73.5625 59.2351 72.9699 60.29 71.915C61.3449 70.8601 61.9375 69.4293 61.9375 67.9375V22.9375C61.9378 22.568 61.8653 22.2022 61.7241 21.8607C61.583 21.5193 61.3759 21.209 61.1148 20.9477ZM42.25 10.0387L52.3363 20.125H42.25V10.0387ZM56.3125 67.9375H5.6875V6.0625H36.625V22.9375C36.625 23.6834 36.9213 24.3988 37.4488 24.9262C37.9762 25.4537 38.6916 25.75 39.4375 25.75H56.3125V67.9375Z"
                  fill="black"
                />
              </g>
              <defs>
                <clipPath id="clip0_607_3925">
                  <rect width="62" height="74" fill="white" />
                </clipPath>
              </defs>
              {/* Animating black lines */}
              <rect x="10" y="10" width="25" height="0" fill="black">
                <animate
                  attributeName="height"
                  from="0"
                  to="3"
                  dur="60s"
                  begin="0s"
                />
              </rect>
              <rect x="10" y="20" width="25" height="0" fill="black">
                <animate
                  attributeName="height"
                  from="0"
                  to="3"
                  dur="50s"
                  begin="10s"
                />
              </rect>
              <rect x="10" y="30" width="40" height="0" fill="black">
                <animate
                  attributeName="height"
                  from="0"
                  to="3"
                  dur="40s"
                  begin="20s"
                />
              </rect>
              <rect x="10" y="40" width="40" height="0" fill="black">
                <animate
                  attributeName="height"
                  from="0"
                  to="3"
                  dur="30"
                  begin="30s"
                />
              </rect>
              <rect x="10" y="50" width="40" height="0" fill="black">
                <animate
                  attributeName="height"
                  from="0"
                  to="3"
                  dur="20s"
                  begin="40s"
                />
              </rect>
              <rect x="10" y="60" width="40" height="0" fill="black">
                <animate
                  attributeName="height"
                  from="0"
                  to="3"
                  dur="10"
                  begin="50s"
                />
              </rect>
            </svg>
          </Typography>

          {/* end of report file svg */}
        </div>
        <div style={{}}>
          {/* svg cloud */}
          <Typography
            component="h1"
            variant="h1"
            className="cloud"
            sx={{ display: "flex", justifyContent: "flex-end" }}>
            <svg
              width="164"
              height="111"
              viewBox="0 0 164 111"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              {/* mask for cloud */}
              <mask
                id="revealUnrevealMask"
                x="0"
                y="0"
                width="100%"
                height="100%">
                {/* Initially fill the entire area with black */}
                <rect
                  x="0"
                  y="0"
                  width="100%"
                  height="100%"
                  fill="black !important"
                  style={{ fill: "beige" }}
                />

                {/* Revealing the light gray color from top to bottom */}
                <rect x="0" y="0" width="100%" height="100%" fill="gray">
                  <animate
                    attributeName="height"
                    from="0%"
                    to="100%"
                    dur="60s"
                  />
                </rect>
              </mask>
              {/* end of mask */}
              <path
                d="M132.225 41.525C129.93 29.8218 123.667 19.2834 114.507 11.7098C105.346 4.13623 93.8566 -0.00269667 82 1.31819e-06C62.2517 1.31819e-06 45.1 11.275 36.5583 27.775C26.5149 28.867 17.2269 33.6546 10.4788 41.2178C3.7308 48.7811 -0.0011733 58.5865 2.76701e-07 68.75C2.76701e-07 91.5062 18.3817 110 41 110H129.833C148.693 110 164 94.6 164 75.625C164 57.475 149.992 42.7625 132.225 41.525Z"
                mask="url(#revealUnrevealMask)"
                fill="black"
              />
              <path
                d="M49 55C50.0609 55 51.0783 55.4214 51.8284 56.1716C52.5786 56.9217 53 57.9391 53 59V75C53 76.0609 52.5786 77.0783 51.8284 77.8284C51.0783 78.5786 50.0609 79 49 79H33C31.9391 79 30.9217 78.5786 30.1716 77.8284C29.4214 77.0783 29 76.0609 29 75V59C29 57.9391 29.4214 56.9217 30.1716 56.1716C30.9217 55.4214 31.9391 55 33 55H49ZM49 57.6667H33C32.6464 57.6667 32.3072 57.8071 32.0572 58.0572C31.8071 58.3072 31.6667 58.6464 31.6667 59V75C31.6667 75.3536 31.8071 75.6928 32.0572 75.9428C32.3072 76.1929 32.6464 76.3333 33 76.3333H49C49.3536 76.3333 49.6928 76.1929 49.9428 75.9428C50.1929 75.6928 50.3333 75.3536 50.3333 75V59C50.3333 58.6464 50.1929 58.3072 49.9428 58.0572C49.6928 57.8071 49.3536 57.6667 49 57.6667ZM35.6667 64.3333C35.9932 64.3334 36.3085 64.4533 36.5525 64.6703C36.7965 64.8873 36.9525 65.1863 36.9907 65.5107L37 65.6667V72.3333C36.9996 72.6732 36.8695 73 36.6362 73.2472C36.4029 73.4943 36.0841 73.643 35.7448 73.6629C35.4056 73.6828 35.0715 73.5724 34.8109 73.3543C34.5503 73.1362 34.3828 72.8268 34.3427 72.4893L34.3333 72.3333V65.6667C34.3333 65.313 34.4738 64.9739 34.7239 64.7239C34.9739 64.4738 35.313 64.3333 35.6667 64.3333ZM39.6667 63C39.9789 63 40.2813 63.1095 40.5211 63.3096C40.7608 63.5096 40.9228 63.7875 40.9787 64.0947C41.247 63.9391 41.5244 63.7997 41.8093 63.6773C42.6987 63.2973 44.0307 63.088 45.2333 63.4653C45.864 63.6653 46.4973 64.0387 46.9667 64.6747C47.3867 65.2413 47.6133 65.9307 47.6587 66.7053L47.6667 67V72.3333C47.6663 72.6732 47.5362 73 47.3029 73.2472C47.0696 73.4943 46.7507 73.643 46.4115 73.6629C46.0722 73.6828 45.7382 73.5724 45.4776 73.3543C45.217 73.1362 45.0495 72.8268 45.0093 72.4893L45 72.3333V67C45 66.56 44.8933 66.3547 44.824 66.26C44.7245 66.1362 44.5873 66.0482 44.4333 66.0093C43.9693 65.8627 43.3013 65.94 42.8573 66.1293C42.1907 66.4147 41.58 66.8627 41.164 67.2773L41 67.4533V72.3333C40.9996 72.6732 40.8695 73 40.6362 73.2472C40.4029 73.4943 40.0841 73.643 39.7448 73.6629C39.4056 73.6828 39.0715 73.5724 38.8109 73.3543C38.5503 73.1362 38.3828 72.8268 38.3427 72.4893L38.3333 72.3333V64.3333C38.3333 63.9797 38.4738 63.6406 38.7239 63.3905C38.9739 63.1405 39.313 63 39.6667 63ZM35.6667 60.3333C36.0203 60.3333 36.3594 60.4738 36.6095 60.7239C36.8595 60.9739 37 61.313 37 61.6667C37 62.0203 36.8595 62.3594 36.6095 62.6095C36.3594 62.8595 36.0203 63 35.6667 63C35.313 63 34.9739 62.8595 34.7239 62.6095C34.4738 62.3594 34.3333 62.0203 34.3333 61.6667C34.3333 61.313 34.4738 60.9739 34.7239 60.7239C34.9739 60.4738 35.313 60.3333 35.6667 60.3333Z"
                fill="white"
              />
              <path
                d="M69.3029 30.612C70.3216 28.6239 71.8845 26.9526 73.8169 25.785C75.7492 24.6173 77.9748 23.9993 80.2449 24C83.5449 24 86.3171 25.1892 88.4367 27.126L84.9261 30.5676C83.6563 29.3784 82.0424 28.7724 80.2449 28.7724C77.0551 28.7724 74.3551 30.8844 73.3939 33.72C73.149 34.44 73.0094 35.208 73.0094 36C73.0094 36.792 73.149 37.56 73.3939 38.28C74.3563 41.1168 77.0551 43.2276 80.2449 43.2276C81.8918 43.2276 83.2939 42.8016 84.391 42.0816C85.0271 41.6712 85.5716 41.1387 85.9917 40.5162C86.4118 39.8937 86.6987 39.1942 86.8351 38.46H80.2449V33.8184H91.7771C91.9216 34.6032 92 35.4216 92 36.2724C92 39.9276 90.6653 43.0044 88.3486 45.0924C86.3233 46.926 83.551 48 80.2449 48C78.6367 48.0006 77.0441 47.6907 75.5582 47.0878C74.0723 46.485 72.7222 45.6011 71.585 44.4867C70.4478 43.3723 69.5459 42.0491 68.9308 40.5929C68.3156 39.1368 67.9994 37.576 68 36C68 34.0632 68.4727 32.232 69.3029 30.612Z"
                fill="white"
              />
              <path
                d="M76.96 65H87.04C90.88 65 94 68.12 94 71.96V82.04C94 83.8859 93.2667 85.6562 91.9615 86.9615C90.6562 88.2667 88.8859 89 87.04 89H76.96C73.12 89 70 85.88 70 82.04V71.96C70 70.1141 70.7333 68.3438 72.0385 67.0385C73.3438 65.7333 75.1141 65 76.96 65ZM76.72 67.4C75.5743 67.4 74.4755 67.8551 73.6653 68.6653C72.8551 69.4755 72.4 70.5743 72.4 71.72V82.28C72.4 84.668 74.332 86.6 76.72 86.6H87.28C88.4257 86.6 89.5245 86.1449 90.3347 85.3347C91.1449 84.5245 91.6 83.4257 91.6 82.28V71.72C91.6 69.332 89.668 67.4 87.28 67.4H76.72ZM88.3 69.2C88.6978 69.2 89.0794 69.358 89.3607 69.6393C89.642 69.9206 89.8 70.3022 89.8 70.7C89.8 71.0978 89.642 71.4794 89.3607 71.7607C89.0794 72.042 88.6978 72.2 88.3 72.2C87.9022 72.2 87.5206 72.042 87.2393 71.7607C86.958 71.4794 86.8 71.0978 86.8 70.7C86.8 70.3022 86.958 69.9206 87.2393 69.6393C87.5206 69.358 87.9022 69.2 88.3 69.2ZM82 71C83.5913 71 85.1174 71.6321 86.2426 72.7574C87.3679 73.8826 88 75.4087 88 77C88 78.5913 87.3679 80.1174 86.2426 81.2426C85.1174 82.3679 83.5913 83 82 83C80.4087 83 78.8826 82.3679 77.7574 81.2426C76.6321 80.1174 76 78.5913 76 77C76 75.4087 76.6321 73.8826 77.7574 72.7574C78.8826 71.6321 80.4087 71 82 71ZM82 73.4C81.0452 73.4 80.1295 73.7793 79.4544 74.4544C78.7793 75.1295 78.4 76.0452 78.4 77C78.4 77.9548 78.7793 78.8705 79.4544 79.5456C80.1295 80.2207 81.0452 80.6 82 80.6C82.9548 80.6 83.8705 80.2207 84.5456 79.5456C85.2207 78.8705 85.6 77.9548 85.6 77C85.6 76.0452 85.2207 75.1295 84.5456 74.4544C83.8705 73.7793 82.9548 73.4 82 73.4Z"
                fill="white"
              />
              <path
                d="M123.633 60C122.02 60 120.473 60.6408 119.332 61.7814C118.191 62.9221 117.551 64.4691 117.551 66.0822V69.4685H114.296C114.133 69.4685 114 69.6 114 69.7644V74.2356C114 74.3987 114.132 74.5315 114.296 74.5315H117.551V83.7041C117.551 83.8672 117.682 84 117.847 84H122.318C122.481 84 122.614 83.8685 122.614 83.7041V74.5315H125.897C126.033 74.5315 126.151 74.4395 126.184 74.3079L127.302 69.8367C127.313 69.7931 127.314 69.7475 127.305 69.7035C127.295 69.6595 127.276 69.6181 127.248 69.5826C127.221 69.5471 127.185 69.5184 127.145 69.4986C127.105 69.4788 127.06 69.4685 127.015 69.4685H122.614V66.0822C122.614 65.9484 122.64 65.8158 122.691 65.6922C122.742 65.5685 122.818 65.4562 122.912 65.3615C123.007 65.2669 123.119 65.1918 123.243 65.1406C123.367 65.0894 123.499 65.063 123.633 65.063H127.052C127.215 65.063 127.348 64.9315 127.348 64.7671V60.2959C127.348 60.1328 127.216 60 127.052 60H123.633Z"
                fill="white"
              />
            </svg>
          </Typography>
          {/* end of svg cloud */}
          {/* usb cable */}
          <Typography className="usb_cable" variant="h1">
            <svg
              width="100%"
              height="100%"
              // viewBox="0 0 161 158"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <rect
                x="6"
                y="158"
                width="12"
                height="12"
                transform="rotate(-90 6 158)"
                fill="black"
              />
              <rect
                y="156"
                width="8"
                height="6"
                transform="rotate(-90 0 156)"
                fill="#797979"
              />
              <rect x="149" y="6" width="12" height="12" fill="black" />
              <rect x="151" width="8" height="6" fill="#797979" />
              <path
                d="M154.68 12C158.174 60.698 134.53 156.837 12 151.81"
                stroke="black"
                strokeWidth="4"
              />
            </svg>
          </Typography>
          {/* end of usb cable */}
        </div>
      </Box>
      <Box sx={{ display: { xs: "none", md: "block" } }}>
        <LinearWithValueLabel value={"100"} />
      </Box>
    </Container>
  );
};

export default ReportWaitingModal;
